{
  "scenarios": [
    {
      "name": "auth-library-change",
      "description": "Change foundational auth library - should affect many projects",
      "changes": ["libs/auth/src/lib/auth.ts"],
      "expectedAffected": [
        "auth",
        "user-management",
        "billing",
        "admin-dashboard",
        "backend",
        "frontend"
      ],
      "expectedJobs": ["build-auth", "test-auth"],
      "verifyTaskDependencies": false
    },
    {
      "name": "database-library-change",
      "description": "Change database library - test should depend on build",
      "changes": ["libs/database/src/lib/database.ts"],
      "expectedAffected": [
        "database",
        "user-management",
        "analytics",
        "billing",
        "reporting",
        "backend"
      ],
      "expectedJobs": ["build-database", "test-database"],
      "verifyTaskDependencies": true
    },
    {
      "name": "logging-library-change",
      "description": "Change logging library (no build required for test)",
      "changes": ["libs/logging/src/lib/logging.ts"],
      "expectedAffected": [
        "logging",
        "user-management",
        "analytics",
        "billing",
        "notifications",
        "reporting",
        "admin-dashboard",
        "backend",
        "frontend",
        "widget",
        "client"
      ],
      "expectedJobs": ["test-logging"],
      "verifyTaskDependencies": false
    },
    {
      "name": "analytics-library-change",
      "description": "Change analytics library - test should depend on build",
      "changes": ["libs/analytics/src/lib/analytics.ts"],
      "expectedAffected": [
        "analytics",
        "reporting",
        "admin-dashboard",
        "backend"
      ],
      "expectedJobs": ["build-analytics", "test-analytics"],
      "verifyTaskDependencies": true
    },
    {
      "name": "notifications-library-change",
      "description": "Change notifications library (no build required for test)",
      "changes": ["libs/notifications/src/lib/notifications.ts"],
      "expectedAffected": [
        "notifications",
        "user-management",
        "billing",
        "backend"
      ],
      "expectedJobs": ["test-notifications"],
      "verifyTaskDependencies": false
    },
    {
      "name": "frontend-app-change",
      "description": "Change frontend app - only affects frontend",
      "changes": ["apps/frontend/src/main.ts"],
      "expectedAffected": ["frontend"],
      "expectedJobs": ["build-frontend", "test-frontend"],
      "verifyTaskDependencies": false
    },
    {
      "name": "backend-app-change",
      "description": "Change backend app - only affects backend",
      "changes": ["apps/backend/src/main.ts"],
      "expectedAffected": ["backend"],
      "expectedJobs": ["build-backend", "test-backend", "integration-test-backend"],
      "verifyTaskDependencies": false
    },
    {
      "name": "pulumi-infrastructure-change",
      "description": "Change Pulumi infrastructure - path-based detection",
      "changes": ["infra/pulumi/index.ts"],
      "expectedAffected": ["infra-pulumi"],
      "expectedJobs": ["preview-infra-pulumi"],
      "verifyTaskDependencies": false
    },
    {
      "name": "kubernetes-manifest-change",
      "description": "Change Kubernetes manifest - path-based detection",
      "changes": ["infra/kubernetes/deployment.yaml"],
      "expectedAffected": ["infra-kubernetes"],
      "expectedJobs": ["validate-infra-kubernetes"],
      "verifyTaskDependencies": false
    },
    {
      "name": "pgroll-migration-change",
      "description": "Change pgroll migration - granular path-based detection",
      "changes": ["migrations/001-initial-schema/migration.json"],
      "expectedAffected": ["migrations"],
      "expectedJobs": ["migrate-migrations"],
      "verifyTaskDependencies": false
    },
    {
      "name": "mixed-nx-and-path-changes",
      "description": "Change both Nx libs and infrastructure - hybrid detection",
      "changes": [
        "libs/auth/src/lib/auth.ts",
        "infra/pulumi/index.ts",
        "migrations/002-add-billing/migration.json"
      ],
      "expectedAffected": [
        "auth",
        "user-management",
        "billing",
        "admin-dashboard",
        "backend",
        "frontend",
        "infra-pulumi",
        "migrations"
      ],
      "expectedJobs": [
        "build-auth",
        "test-auth",
        "preview-infra-pulumi",
        "migrate-migrations"
      ],
      "verifyTaskDependencies": false
    }
  ]
}
